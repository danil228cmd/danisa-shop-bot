# ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –ë–æ—Ç–∞ –¥–ª—è DANISA SHOP

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

Telegram –±–æ—Ç —Ç—Ä–µ–±—É–µ—Ç **–ø—É–±–ª–∏—á–Ω–æ–≥–æ URL** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º **ngrok**.

## –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok

1. –°–∫–∞—á–∞–π—Ç–µ ngrok –æ—Ç—Å—é–¥–∞: https://ngrok.com/download
2. –†–∞—Å–ø–∞–∫—É–π—Ç–µ —Ñ–∞–π–ª –≤ –ª—é–±—É—é –ø–∞–ø–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: `C:\ngrok`)
3. **–í–∞–∂–Ω–æ:** –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ ngrok.com –∏ –ø–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
4. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É (–≤ –ø–∞–ø–∫–µ —Å ngrok.exe):
   ```
   ngrok config add-authtoken YOUR_TOKEN_HERE
   ```

## –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ ngrok

–û—Ç–∫—Ä–æ–π—Ç–µ PowerShell/CMD –≤ –ø–∞–ø–∫–µ —Å `ngrok.exe` –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```
.\ngrok http 3000
```

–í—ã —É–≤–∏–¥–∏—Ç–µ –≤—ã–≤–æ–¥ –≤—Ä–æ–¥–µ:
```
Session Status                online
Forwarding                    https://abc123def456.ngrok.io -> http://localhost:3000
```

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL**: `https://abc123def456.ngrok.io`

## –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Webhook –¥–ª—è –±–æ—Ç–∞

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ PowerShell (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–û—Ç–∫—Ä–æ–π—Ç–µ PowerShell –≤ –ø–∞–ø–∫–µ `c:\shop` –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```powershell
powershell -ExecutionPolicy Bypass -File setup-telegram.ps1
```

–ö–æ–≥–¥–∞ –ø–æ–ø—Ä–æ—Å–∏—Ç URL - –≤—Å—Ç–∞–≤—å—Ç–µ URL –∏–∑ ngrok (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123def456.ngrok.io`)

### –°–ø–æ—Å–æ–± 2: –í—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —ç—Ç—É —Å—Å—ã–ª–∫—É (–∑–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è):

```
https://api.telegram.org/bot8232572053:AAF5zxkQ-EpEAAkQPw_FUYQnO45PdfkrwB8/setWebhook?url=https://abc123def456.ngrok.io/telegram
```

–ï—Å–ª–∏ –≤—Å—ë —Ö–æ—Ä–æ—à–æ, –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –æ—Ç–≤–µ—Ç: `{"ok":true,"result":true,...}`

### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ curl

```bash
curl "https://api.telegram.org/bot8232572053:AAF5zxkQ-EpEAAkQPw_FUYQnO45PdfkrwB8/setWebhook?url=https://abc123def456.ngrok.io/telegram"
```

## –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ `@7855745005` (–∏–ª–∏ –ø–æ –∏–º–µ–Ω–∏)
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
4. –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ "üõçÔ∏è –ü–µ—Ä–µ–π—Ç–∏ –≤ –º–∞–≥–∞–∑–∏–Ω"
5. –î–ª—è –∞–¥–º–∏–Ω–∞: `/admin` - –æ—Ç–∫—Ä–æ–µ—Ç –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

## –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ngrok

–í –≤—ã–≤–æ–¥–µ ngrok –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è –∑–∞–ø—Ä–æ—Å—ã:
```
POST /telegram HTTP/1.1
```

–ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–µ—Ç - Webhook –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Webhook —Å—Ç–∞—Ç—É—Å

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://api.telegram.org/bot8232572053:AAF5zxkQ-EpEAAkQPw_FUYQnO45PdfkrwB8/getWebhookInfo
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `"has_custom_certificate":false,"pending_update_count":0,...`

### –°–±—Ä–æ—Å—å—Ç–µ Webhook (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å)

```
https://api.telegram.org/bot8232572053:AAF5zxkQ-EpEAAkQPw_FUYQnO45PdfkrwB8/deleteWebhook
```

## –°–∫—Ä–∏–ø—Ç—ã –≤ –ø–∞–ø–∫–µ

- `run-ngrok.bat` - –±—ã—Å—Ç—Ä–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å ngrok (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ PATH)
- `setup-telegram.ps1` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Webhook –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```powershell
# –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–µ–±—Ö—É–∫–µ
curl "https://api.telegram.org/bot8232572053:AAF5zxkQ-EpEAAkQPw_FUYQnO45PdfkrwB8/getWebhookInfo"

# –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è polling)
curl "https://api.telegram.org/bot8232572053:AAF5zxkQ-EpEAAkQPw_FUYQnO45PdfkrwB8/getUpdates"

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É
curl "https://api.telegram.org/bot8232572053:AAF5zxkQ-EpEAAkQPw_FUYQnO45PdfkrwB8/sendMessage?chat_id=7855745005&text=Test"
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Telegram Bot ‚Üí ngrok ‚Üí localhost:3000/telegram ‚Üí server.js ‚Üí –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥
```

- `/start` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É —Å Web App –º–∞–≥–∞–∑–∏–Ω–∞
- `/admin` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞ —Å ID 7855745005)
